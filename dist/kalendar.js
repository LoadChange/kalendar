!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Kalendar=e()}(this,function(){"use strict";function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function t(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function c(a){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,r;e=a,r=i[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return a}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var h=["猴","鸡","狗","猪","鼠","牛","虎","兔","龙","蛇","马","羊"],a=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,42192,53584,62034,54560],v=function(){function e(t){f(this,e),this.y=t.getFullYear(),this.m=t.getMonth(),this.d=t.getDate()}return t(e,[{key:"leapMonth",value:function(t){return 15&a[t-1900]}},{key:"leapDays",value:function(t){return this.leapMonth(t)?65536&a[t-1900]?30:29:0}},{key:"lYearDays",value:function(t){var e,n=348;for(e=32768;8<e;e>>=1)n+=a[t-1900]&e?1:0;return n+this.leapDays(t)}},{key:"monthDays",value:function(t,e){return a[t-1900]&65536>>e?30:29}},{key:"convert",value:function(){var t,e=this.y,n=this.m,r=this.d;if(e<1900||2100<e||1900===e&&!n&&r<31)return{};var a=0,i=(Date.UTC(e,n,r)-Date.UTC(1900,0,31))/864e5;for(t=1900;t<2101&&0<i;t++)i-=a=this.lYearDays(t);i<0&&(i+=a,t-=1);var o=t,u=this.leapMonth(t),s=!1;for(t=1;t<13&&0<i;t++)a=0<u&&t===u+1&&!s?(t-=1,s=!0,this.leapDays(o)):this.monthDays(o,t),s=!(s&&t===u+1),i-=a;return!i&&0<u&&t===u+1&&(s=!s)&&(t-=1),i<0&&(i+=a,t-=1),{year:o,leap:u,month:t,day:i+1}}}]),e}(),T=function(t,e){var n=t.getMonth()+1,r=t.getDate();return n="".concat(n<10?"0":"").concat(n),r="".concat(r<10?"0":"").concat(r),(e?[t.getFullYear(),n]:[t.getFullYear(),n,r]).join("-")},e=function(t){var e=new Date,n=i(t.split("-"),2),r=n[0],a=n[1];return e.setFullYear(+r),e.setMonth(a-1,1),e},y=function(t){var e=new Date(t);return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.getTime()},u=function(t){return 12*t.getFullYear()+t.getMonth()+1},j=function(){function l(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};f(this,l);var r,a,i=y((new Date).getTime()),o=y(t.getTime()),u=T(t),s=c({year:t.getFullYear(),month:t.getMonth(),date:t.getDate(),day:t.getDay(),past:o<i,today:i===y(o),animal:(a=t,h[a.getFullYear()%12]),lunar:(r=t,new v(r).convert()),dateText:u,timestamp:o},n);Object.keys(s).forEach(function(t){return e.set(t,s[t])})}return t(l,[{key:"set",value:function(t,e){this[t]=e}}]),l}();return function(){function l(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.start,n=t.end,r=t.unifiedMount,a=void 0===r?{}:r,i=t.mount,o=void 0===i?{}:i,u=t.weekStart,s=void 0===u?0:u;return f(this,l),this.startTime=e,this.endTime=n,this.unifiedMount=a,this.mount=o,this.weekStart=s,this._create()}return t(l,[{key:"_create",value:function(){var t=this.startDate,e=this.endDate,n={},r=u(e)-u(t),a=y(t.getTime());if(r<0)return null;var i=0;do{var o=new Date(a);o.setMonth(o.getMonth()+i),n[T(o,!0)]=l.monthly(c({date:o},this)),i+=1}while(i<r);return n}},{key:"startDate",get:function(){var t=this.startTime?e(this.startTime):new Date;return t.setDate(1),t}},{key:"endDate",get:function(){if(this.endTime)return e(this.endTime);var t=this.startDate;return t.setMonth(t.getMonth()+3),t}}],[{key:"monthly",value:function(t){var e=t.date,n=t.mount,r=void 0===n?{}:n,a=t.unifiedMount,i=void 0===a?{}:a,o=t.weekStart,u=void 0===o?0:o,s=t.continuous;e.setDate(1);var l,f,c=[],h=[31,(f=(l=e).getFullYear())%4||!(f%100)&&f%400?28:29,31,30,31,30,31,31,30,31,30,31][l.getMonth()],v=e.getDay(),y=0;v!==u&&(y=(v||7)-u);for(var d=0;d<h+y;d+=7){var g=[],D=7;if(!d&&y){for(var m=0;m<y;m++)if(s){var p=new Date(e.valueOf());p.setDate(p.getDate()-y+m);var w=T(p);g.push(new j(p,Object.assign({},i,r[w])))}else g.push(null);D-=y}for(var b=0;b<D;b++){var M=T(e);if(g.push(new j(e,Object.assign({},i,r[M]))),e.getDate()>=h)break;e.setDate(e.getDate()+1)}for(var k=new Date(e.valueOf());g.length<D;)if(s){k.setDate(k.getDate()+1);var O=T(k);g.push(new j(k,Object.assign({},i,r[O])))}else g.push(null);c.push(g)}return c}}]),l}()});
//# sourceMappingURL=kalendar.js.map
