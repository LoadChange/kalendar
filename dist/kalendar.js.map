{"version":3,"file":"kalendar.js","sources":["../src/constants.js","../src/solar2lunar.js","../src/utils.js","../src/day.js","../src/kalendar.js"],"sourcesContent":["export const animals = ['猴', '鸡', '狗', '猪', '鼠', '牛', '虎', '兔', '龙', '蛇', '马', '羊'];\n\nexport const lunarInfo = [\n  0x04bd8, 0x04ae0, 0x0a570, 0x054d5, 0x0d260, 0x0d950, 0x16554, 0x056a0, 0x09ad0, 0x055d2, // 1900-1909\n  0x04ae0, 0x0a5b6, 0x0a4d0, 0x0d250, 0x1d255, 0x0b540, 0x0d6a0, 0x0ada2, 0x095b0, 0x14977, // 1910-1919\n  0x04970, 0x0a4b0, 0x0b4b5, 0x06a50, 0x06d40, 0x1ab54, 0x02b60, 0x09570, 0x052f2, 0x04970, // 1920-1929\n  0x06566, 0x0d4a0, 0x0ea50, 0x06e95, 0x05ad0, 0x02b60, 0x186e3, 0x092e0, 0x1c8d7, 0x0c950, // 1930-1939\n  0x0d4a0, 0x1d8a6, 0x0b550, 0x056a0, 0x1a5b4, 0x025d0, 0x092d0, 0x0d2b2, 0x0a950, 0x0b557, // 1940-1949\n  0x06ca0, 0x0b550, 0x15355, 0x04da0, 0x0a5b0, 0x14573, 0x052b0, 0x0a9a8, 0x0e950, 0x06aa0, // 1950-1959\n  0x0aea6, 0x0ab50, 0x04b60, 0x0aae4, 0x0a570, 0x05260, 0x0f263, 0x0d950, 0x05b57, 0x056a0, // 1960-1969\n  0x096d0, 0x04dd5, 0x04ad0, 0x0a4d0, 0x0d4d4, 0x0d250, 0x0d558, 0x0b540, 0x0b6a0, 0x195a6, // 1970-1979\n  0x095b0, 0x049b0, 0x0a974, 0x0a4b0, 0x0b27a, 0x06a50, 0x06d40, 0x0af46, 0x0ab60, 0x09570, // 1980-1989\n  0x04af5, 0x04970, 0x064b0, 0x074a3, 0x0ea50, 0x06b58, 0x05ac0, 0x0ab60, 0x096d5, 0x092e0, // 1990-1999\n  0x0c960, 0x0d954, 0x0d4a0, 0x0da50, 0x07552, 0x056a0, 0x0abb7, 0x025d0, 0x092d0, 0x0cab5, // 2000-2009\n  0x0a950, 0x0b4a0, 0x0baa4, 0x0ad50, 0x055d9, 0x04ba0, 0x0a5b0, 0x15176, 0x052b0, 0x0a930, // 2010-2019\n  0x07954, 0x06aa0, 0x0ad50, 0x05b52, 0x04b60, 0x0a6e6, 0x0a4e0, 0x0d260, 0x0ea65, 0x0d530, // 2020-2029\n  0x05aa0, 0x076a3, 0x096d0, 0x04afb, 0x04ad0, 0x0a4d0, 0x1d0b6, 0x0d250, 0x0d520, 0x0dd45, // 2030-2039\n  0x0b5a0, 0x056d0, 0x055b2, 0x049b0, 0x0a577, 0x0a4b0, 0x0aa50, 0x1b255, 0x06d20, 0x0ada0, // 2040-2049\n  0x14b63, 0x09370, 0x049f8, 0x04970, 0x064b0, 0x168a6, 0x0ea50, 0x06b20, 0x1a6c4, 0x0aae0, // 2050-2059\n  0x092e0, 0x0d2e3, 0x0c960, 0x0d557, 0x0d4a0, 0x0da50, 0x05d55, 0x056a0, 0x0a6d0, 0x055d4, // 2060-2069\n  0x052d0, 0x0a9b8, 0x0a950, 0x0b4a0, 0x0b6a6, 0x0ad50, 0x055a0, 0x0aba4, 0x0a5b0, 0x052b0, // 2070-2079\n  0x0b273, 0x06930, 0x07337, 0x06aa0, 0x0ad50, 0x14b55, 0x04b60, 0x0a570, 0x054e4, 0x0d160, // 2080-2089\n  0x0e968, 0x0d520, 0x0daa0, 0x16aa6, 0x056d0, 0x04ae0, 0x0a9d4, 0x0a4d0, 0x0d150, 0x0f252, // 2090-2099\n  0x0d520, // 2100\n];\n","import { lunarInfo } from './constants';\n\nclass Solar2lunar {\n  constructor(date) {\n    this.y = date.getFullYear();\n    this.m = date.getMonth();\n    this.d = date.getDate();\n  }\n\n  /**\n   * 返回农历y年闰月是哪个月；若y年没有闰月 则返回0\n   * @param y\n   * @returns {number}\n   */\n  leapMonth(y) {\n    return (lunarInfo[y - 1900] & 0xf);\n  }\n\n  leapDays(y) {\n    if (this.leapMonth(y)) {\n      return ((lunarInfo[y - 1900] & 0x10000) ? 30 : 29);\n    }\n    return (0);\n  }\n\n  lYearDays(y) {\n    let i;\n    let sum = 348;\n    for (i = 0x8000; i > 0x8; i >>= 1) {\n      sum += (lunarInfo[y - 1900] & i) ? 1 : 0;\n    }\n    return (sum + this.leapDays(y));\n  }\n\n  monthDays(y, m) {\n    return ((lunarInfo[y - 1900] & (0x10000 >> m)) ? 30 : 29);\n  }\n\n  convert() {\n    const { y, m, d } = this;\n    if (y < 1900 || y > 2100 || (y === 1900 && !m && d < 31)) return {};\n\n    let i;\n    let temp = 0;\n    let offset = (Date.UTC(y, m, d) - Date.UTC(1900, 0, 31)) / 86400000;\n    for (i = 1900; i < 2101 && offset > 0; i++) {\n      temp = this.lYearDays(i);\n      offset -= temp;\n    }\n    if (offset < 0) {\n      offset += temp;\n      i -= 1;\n    }\n\n    const year = i; // 农历年\n    const leap = this.leapMonth(i); // 闰哪个月\n\n    let isLeap = false;\n    for (i = 1; i < 13 && offset > 0; i++) {\n      if (leap > 0 && i === (leap + 1) && !isLeap) { // 闰月\n        i -= 1;\n        isLeap = true;\n        temp = this.leapDays(year); // 计算农历闰月天数\n      } else {\n        temp = this.monthDays(year, i);// 计算农历普通月天数\n      }\n      isLeap = !(isLeap && i === (leap + 1)); // 解除闰月\n      offset -= temp;\n    }\n\n    if (!offset && leap > 0 && i === leap + 1) {\n      isLeap = !isLeap;\n      if (isLeap) i -= 1;\n    }\n    if (offset < 0) {\n      offset += temp;\n      i -= 1;\n    }\n    const month = i; // 农历月\n    const day = offset + 1; // 农历日\n\n    return { year, leap, month, day };\n  }\n}\n\nexport default Solar2lunar;\n","import { animals } from './constants';\nimport Solar2lunar from './solar2lunar';\n\nexport const getChinaStandard = (date, streamline) => {\n  let month = date.getMonth() + 1;\n  let day = date.getDate();\n  month = `${month < 10 ? '0' : ''}${month}`;\n  day = `${day < 10 ? '0' : ''}${day}`;\n  const arr = streamline ? [date.getFullYear(), month] : [date.getFullYear(), month, day];\n  return arr.join('-');\n};\n\nexport const getMonthDays = (date) => {\n  const year = date.getFullYear();\n  const month = date.getMonth();\n  const leapYear = !(year % 4) && ((year % 100) || !(year % 400));\n  const days = [31, leapYear ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n  return days[month];\n};\n\nexport const getDate = (dateStr) => {\n  const date = new Date();\n  const [year, month] = dateStr.split('-');\n  date.setFullYear(+year);\n  date.setMonth(month - 1, 1);\n  return date;\n};\n\nexport const eraseTime = (timeStamp) => {\n  const date = new Date(timeStamp);\n  date.setHours(0);\n  date.setMinutes(0);\n  date.setSeconds(0);\n  date.setMilliseconds(0);\n  return date.getTime();\n};\n\nexport const calcMonth = date => date.getFullYear() * 12 + date.getMonth() + 1;\n\nexport const getAnimal = date => animals[date.getFullYear() % 12];\n\nexport const lunar = date => new Solar2lunar(date).convert();\n","import * as utils from './utils';\n\nclass Day {\n  constructor(date, extension = {}) {\n    const toDay = utils.eraseTime(new Date().getTime());\n    const timestamp = utils.eraseTime(date.getTime());\n    const dateText = utils.getChinaStandard(date);\n    const assignment = {\n      year: date.getFullYear(),\n      month: date.getMonth(),\n      date: date.getDate(),\n      day: date.getDay(),\n      past: toDay > timestamp,\n      today: toDay === utils.eraseTime(timestamp),\n      animal: utils.getAnimal(date),\n      lunar: utils.lunar(date),\n      dateText,\n      timestamp,\n      ...extension,\n    };\n    Object.keys(assignment).forEach(key => this.set(key, assignment[key]));\n  }\n\n  set(key, val) {\n    this[key] = val;\n  }\n}\n\nexport default Day;\n","import Day from './day';\nimport * as utils from './utils';\n\nclass Kalendar {\n  constructor({ start, end, unifiedMount = {}, mount = {}, weekStart = 0 } = {}) {\n    this.startTime = start;\n    this.endTime = end;\n    this.unifiedMount = unifiedMount;\n    this.mount = mount;\n    this.weekStart = weekStart;\n    return this._create();\n  }\n\n  get startDate() {\n    const date = this.startTime ? utils.getDate(this.startTime) : new Date();\n    date.setDate(1);\n    return date;\n  }\n\n  get endDate() {\n    if (this.endTime) return utils.getDate(this.endTime);\n    const date = this.startDate;\n    date.setMonth(date.getMonth() + 3);\n    return date;\n  }\n\n  _create() {\n    const { startDate, endDate } = this;\n    const table = {};\n    const count = utils.calcMonth(endDate) - utils.calcMonth(startDate);\n    const startTime = utils.eraseTime(startDate.getTime());\n    if (count < 0) return null;\n    let idx = 0;\n    do {\n      const date = new Date(startTime);\n      date.setMonth(date.getMonth() + idx);\n      table[utils.getChinaStandard(date, true)] = Kalendar.monthly({ date, ...this });\n      idx += 1;\n    } while (count > idx);\n    return table;\n  }\n\n  static monthly({ date, mount = {}, unifiedMount = {}, weekStart = 0, continuous }) {\n    date.setDate(1);\n    const monthTable = [];\n    const days = utils.getMonthDays(date);\n    const day = date.getDay();\n    let skip = 0;\n    if (day !== weekStart) skip = (day || 7) - weekStart;\n    for (let i = 0; i < days + skip; i += 7) {\n      const week = [];\n      let num = 7;\n      if (!i && skip) {\n        for (let k = 0; k < skip; k++) {\n          if (continuous) {\n            const agoneDate = new Date(date.valueOf());\n            agoneDate.setDate(agoneDate.getDate() - skip + k);\n            const previousDateText = utils.getChinaStandard(agoneDate);\n            week.push(new Day(agoneDate, Object.assign({}, unifiedMount, mount[previousDateText])));\n          } else {\n            week.push(null);\n          }\n        }\n        num -= skip;\n      }\n      for (let j = 0; j < num; j++) {\n        const dateText = utils.getChinaStandard(date);\n        week.push(new Day(date, Object.assign({}, unifiedMount, mount[dateText])));\n        if (date.getDate() >= days) break;\n        date.setDate(date.getDate() + 1);\n      }\n      const futureDate = new Date(date.valueOf());\n      while (week.length < num) {\n        if (continuous) {\n          futureDate.setDate(futureDate.getDate() + 1);\n          const dateText = utils.getChinaStandard(futureDate);\n          week.push(new Day(futureDate, Object.assign({}, unifiedMount, mount[dateText])));\n        } else {\n          week.push(null);\n        }\n      }\n      monthTable.push(week);\n    }\n    return monthTable;\n  }\n}\n\nexport default Kalendar;\n"],"names":["animals","lunarInfo","Solar2lunar","date","y","getFullYear","m","getMonth","d","getDate","leapMonth","i","sum","leapDays","temp","offset","Date","UTC","lYearDays","year","leap","isLeap","monthDays","month","day","getChinaStandard","streamline","arr","join","getMonthDays","leapYear","days","dateStr","split","setFullYear","setMonth","eraseTime","timeStamp","setHours","setMinutes","setSeconds","setMilliseconds","getTime","calcMonth","getAnimal","lunar","convert","Day","extension","toDay","utils","timestamp","dateText","assignment","getDay","past","today","animal","Object","keys","forEach","key","set","val","Kalendar","start","end","unifiedMount","mount","weekStart","startTime","endTime","_create","startDate","endDate","table","count","idx","monthly","setDate","continuous","monthTable","skip","week","num","k","agoneDate","valueOf","previousDateText","push","assign","j","futureDate","length"],"mappings":"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"}